<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Formulario de cifrado</title>
</head>
<body>
  <form id="formulario" method="POST">
    <label for="mensaje">Mensaje:</label>
    <input type="text" id="mensaje" name="mensaje">
    <label for="clave">Clave:</label>
    <input type="password" id="clave" name="clave">
    <button type="submit">Cifrar</button>
  </form>

  <div id="resultado"></div>

  <script>
    const formulario = document.getElementById('formulario');
    const mensaje = document.getElementById('mensaje');
    const clave = document.getElementById('clave');
    const resultado = document.getElementById('resultado');

    formulario.addEventListener('submit', async (event) => {
      event.preventDefault();

      const data = {
        mensaje: mensaje.value,
        clave: clave.value.toString()
      };

      await fetch('/.netlify/functions/cifrado-xor', {
        method: 'POST',
        body: JSON.stringify(data)
      })
        .then(response => response.text())
        .then(mensajeCifrado => {
          resultado.textContent = `Mensaje cifrado: ${mensajeCifrado}`;
        })
        .catch(error => {
          resultado.textContent = `Error: ${error}`;
        });
    });
  </script>
</body>
</html>